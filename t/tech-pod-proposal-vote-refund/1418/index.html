<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width">
    <title>Tech Pod Proposal: Vote Refund</title>
    <link rel="stylesheet" href="../../../archived.css" />
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']]}});
    </script>
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
  </head>

  <body>
    <header class="header">
      <div class="title-span">
        <a href="../../../">
          <img src="../../../images/logo.svg" height="40" alt="Nouns - NounsDAO and Nouns Community" id="site-logo" />
        </a>
      </div>
    </header>

    <div class="main">
    <div class="archive-span">Archived on 15/05/2025</div>
    <h1 class="topic-title">Tech Pod Proposal: Vote Refund</h1>
            <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3348_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">krel</div>
          <div class="post_content">
<p><div class="lightbox-wrapper"><a class="lightbox" data-download-href="/uploads/short-url/iQmjDll1DKi1IHSHpBD0GGliJvf.png?dl=1" href="https://europe1.discourse-cdn.com/flex005/uploads/nouns/original/2X/8/841256b8398c3b05cb86fc80ed8becaab3681045.png" rel="noopener nofollow ugc" title="cash-reg"><img alt="cash-reg" data-base62-sha1="iQmjDll1DKi1IHSHpBD0GGliJvf" data-small-upload="https://europe1.discourse-cdn.com/flex005/uploads/nouns/optimized/2X/8/841256b8398c3b05cb86fc80ed8becaab3681045_2_10x10.png" height="250" src="https://europe1.discourse-cdn.com/flex005/uploads/nouns/original/2X/8/841256b8398c3b05cb86fc80ed8becaab3681045.png" width="250"/><div class="meta">
<svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use href="#far-image"></use></svg><span class="filename">cash-reg</span><span class="informations">640×640 1.17 KB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use href="#discourse-expand"></use></svg>
</div></a></div></p>
<h1>
<a class="anchor" href="#votewithrefund-contract-update-1" name="votewithrefund-contract-update-1"></a>‘VoteWithRefund’ Contract Update</h1>
<p>This proposal suggests an update to the main governance contract that refunds costs associated with voting. The ‘voteWithRefund’ function would perform the action and refund the voter, all in one transaction. The voter is refunded for gas fees in full.</p>
<p>I propose this upgrade is reviewed by the Tech Grants Pod and added to their backlog of work to be prioritized.</p>
<p>Ask: X ETH</p>
<p><strong>Why</strong></p>
<ul>
<li>Gas fees can be costly and prohibitive (especially for delegatees)</li>
<li>Further democratize, incentivize, and remove barriers of entry for Nouns governance</li>
<li>The Small Grants and Retro fund should not be in the business of refunding gas fees (as per the wish of Noun 22)</li>
</ul>
<p><strong>Implementation</strong></p>
<ul>
<li><em>Contract details to be fleshed out by the Tech Grants Pod, given they take on the task.</em></li>
<li><em>Brianj is interested in managing the frontend work</em></li>
</ul>
<ul>
<li>
<p><strong>Contract</strong></p>
<ul>
<li>In short, update the main governance contract with a new function, ‘voteWithRefund’, which performs the vote action and refunds the user in a single transaction</li>
</ul>
<ol>
<li>The user will only be refunded if they have at least one vote. This rule avoids any non-nouner depleting our refund reserves at no cost. For context, the <code>castVote</code> function allows users with no votes to call it.</li>
<li>Rather than revert if the gas price is too high (see: <a href="https://github.com/fomo-nouns/fomo-nouns/blob/main/packages/contracts/contracts/NounSettlement.sol#L56-L64" rel="noopener nofollow ugc">FOMO</a>), cap the gas price used in the refund calculation to a reasonable maximum. It’s unlikely that this cap is unintentionally exceeded, but if it is, it’s important that the vote itself succeeds.</li>
<li>If the contract does not have enough refund reserves, then no refund is provided. The vote must still succeed.</li>
<li>(Suggestion) In the unlikely event that a nouner votes from a contract that does not accept ether or otherwise reverts, then the vote should still succeed despite no refund being provided.</li>
</ol>
</li>
<li>
<p><strong>Frontend</strong></p>
<ul>
<li>Update <a href="http://nouns.wtf/">nouns.wtf</a> main governance UI to use the new ‘voteWithRefund’ contract function</li>
<li>Potentially add a small link/notice on <a href="http://nouns.wtf/vote">nouns.wtf/vote</a> to explain that voting is free/refunded</li>
</ul>
</li>
</ul>
<p><strong>Funding</strong></p>
<ul>
<li>Compensation for Tech Grants Pod (contract):
<ul>
<li>0 ETH</li>
</ul>
</li>
<li>Compensation for Brianj (frontend):
<ul>
<li>X ETH</li>
<li><em>TBD; I suspect this can be managed internally by Tech Grants(?) but interested to hear what the community think is fair comp</em></li>
</ul>
</li>
<li>Total funds requested
<ul>
<li><strong>X ETH</strong></li>
</ul>
</li>
</ul>
<p><strong>More / open questions</strong></p>
<ul>
<li>Napkin calculation: The modified contract would pay out around 0.1 ETH daily at today’s rate. In a future scenario of 1000 active members, gas fees of $10, and a new proposal every 2 days, the modified contract would refund a maximum of $5,000 (or &lt;3 ETH at current price) per day.</li>
<li>I choose to leave Proposal Submission fees out of this proposal as I suspect the associated gas fee is healthy for governance and may act as a deterrent to spam. We can revisit this assumption at a later point.</li>
</ul>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3348_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">krel</div>
          <div class="post_content">
<p>This is a first draft. Please come with feedback on how to improve this prop.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/771_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">brennen.eth</div>
          <div class="post_content">
<p>Tech grants can coordinate to create the refund contract function, but it needs to know who has voted, who put up a proposal. <span class="mention">@vapeape</span> <span class="mention">@solimander</span> what’s the best way to handle this on-chain?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">brianj</div>
          <div class="post_content">
<p>My total “top of my head” thought on this was we could look at the vote receipts</p><aside class="onebox allowlistedgeneric" data-onebox-src="https://sourcegraph.com/github.com/nounsDAO/nouns-monorepo/-/blob/packages/nouns-contracts/contracts/governance/NounsDAOLogicV1.sol?L412">
<header class="source">
<a href="https://sourcegraph.com/github.com/nounsDAO/nouns-monorepo/-/blob/packages/nouns-contracts/contracts/governance/NounsDAOLogicV1.sol?L412" rel="noopener nofollow ugc" target="_blank">sourcegraph.com</a>
</header>
<article class="onebox-body">
<div class="aspect-image" style="--aspect-ratio:690/87;"><img class="thumbnail" data-small-upload="https://europe1.discourse-cdn.com/flex005/uploads/nouns/optimized/2X/2/2223d81d2c914e867cc718f91421c91caa3bdad3_2_10x10.png" height="87" src="https://europe1.discourse-cdn.com/flex005/uploads/nouns/optimized/2X/2/2223d81d2c914e867cc718f91421c91caa3bdad3_2_690x87.png" srcset="https://europe1.discourse-cdn.com/flex005/uploads/nouns/optimized/2X/2/2223d81d2c914e867cc718f91421c91caa3bdad3_2_690x87.png, https://europe1.discourse-cdn.com/flex005/uploads/nouns/optimized/2X/2/2223d81d2c914e867cc718f91421c91caa3bdad3_2_1035x130.png 1.5x, https://europe1.discourse-cdn.com/flex005/uploads/nouns/optimized/2X/2/2223d81d2c914e867cc718f91421c91caa3bdad3_2_1380x174.png 2x" width="690"/></div>
<h3><a href="https://sourcegraph.com/github.com/nounsDAO/nouns-monorepo/-/blob/packages/nouns-contracts/contracts/governance/NounsDAOLogicV1.sol?L412" rel="noopener nofollow ugc" target="_blank">NounsDAOLogicV1.sol?L412</a></h3>
<p>https://sourcegraph.com/github.com/nounsDAO/nouns-monorepo</p>
</article>
<div class="onebox-metadata">
</div>
<div style="clear: both"></div>
</aside>
<p>Basic flow:<br/>
have a function refundForProp(propId, address)</p>
<p>looks at the receipt for the given (propId , address) pair and if it’s valid (i.e. it voted) and has not collected a refund yet it refunds address accordingly. I see this function working like settle auction in that it’s callable by anyone but in practice (because it sends funds to address not msg.sender) would probably only be called by the person getting the refund.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/169_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">solimander</div>
          <div class="post_content">
<p>Refunding on a per-transaction basis <a href="https://github.com/fomo-nouns/fomo-nouns/blob/main/packages/contracts/contracts/NounSettlement.sol#L56-L64">similar to FOMO Nouns</a> would be the easiest, cheapest way to issue an accurate refund. This comes with the added benefit of only requiring a single transaction. Otherwise, the refund transaction itself would require ETH for gas, which would defeat the entire purpose, or require additional capital to refund.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3348_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">krel</div>
          <div class="post_content">
<p>If Nouns end up in the hands of members for whom gas fees are not trivial (via delegation etc), I think its fine if refunds require additional capital — would still be net positive for Nouns governance i imagine.</p>
<p>That said, I’m all for making this both cheap and easy. Given we adopt your idea, how does that meaningfully change the prop? (Im somewhat contract illiterate.)</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/939_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">verb-e</div>
          <div class="post_content">
<p>I think <span class="mention">@solimander</span>’s suggestion (which I really like for its simplicity) means there is no user flow where you go check if you’re eligible for refunds. It would support future actions only; we would deploy a new contract that provides functions like “voteWithRefund” that would perform the action for you and refund you, all in one transaction. Then on the UI side, we would change nouns.wtf’s main governance UI to use this new contract.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3348_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">krel</div>
          <div class="post_content">
<p>thanks, very helpful, will update the prop to reflect this</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/169_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">solimander</div>
          <div class="post_content">
<p>If we do go this route, there are a few rules that we should impose:</p>
<ol>
<li>The user will only be refunded if they have at least one vote. This rule avoids any non-nouner depleting our refund reserves at no cost. For context, the <code>castVote</code> function allows users with no votes to call it.</li>
<li>Rather than revert if the gas price is too high (see: <a href="https://github.com/fomo-nouns/fomo-nouns/blob/main/packages/contracts/contracts/NounSettlement.sol#L56-L64">FOMO</a>), cap the gas price used in the refund calculation to a reasonable maximum. It’s unlikely that this cap is unintentionally exceeded, but if it is, it’s important that the vote itself succeeds.</li>
<li>If the contract does not have enough refund reserves, then no refund is provided. The vote must still succeed.</li>
</ol>
<p>One item that’s up for discussion is whether we should check if the refund transfer is successful. Personally, I do not see the value in doing this. In the unlikely event that a nouner votes from a contract that does not accept ether or otherwise reverts, then the vote should still succeed despite no refund being provided.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3348_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">krel</div>
          <div class="post_content">
<p>Excellent additions, thanks for thinking this through. Adding to prop.</p>
<p>2 clear goals:</p>
<ul>
<li>The refund cannot be abused</li>
<li>The vote is of primary importance, refund secondary. The vote must succeed regardless of the refund</li>
</ul>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2936_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">AndrewLaddusaw</div>
          <div class="post_content">
<p>This may be a dumb question so forgive my ignorance on the tech side. Is there a way to take the voting  to a second level chain like Polygon or Optimism? They work with Etherium, but the fees are miniscule in comparison. I’m trying to learn how this works, so any help in my understanding would be great.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4360_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">waterdrops</div>
          <div class="post_content">
<p>This prop inspired my prop-house entry. <img alt=":arrow_down:" class="emoji" height="20" loading="lazy" src="https://emoji.discourse-cdn.com/twitter/arrow_down.png?v=12" title=":arrow_down:" width="20"/></p>
<p>I’d love to hear your thoughts <span class="mention">@krel</span></p>
<aside class="onebox allowlistedgeneric" data-onebox-src="https://prop.house/nouns/open-round:-12/2239">
<header class="source">
<img class="site-icon" height="32" src="https://europe1.discourse-cdn.com/flex005/uploads/nouns/original/2X/a/aa2f8f6df2fd54ed441030cccb1052c6e5774d16.png" width="32"/>
<a href="https://prop.house/nouns/open-round:-12/2239" rel="noopener nofollow ugc" target="_blank">prop.house</a>
</header>
<article class="onebox-body">
<div class="aspect-image" style="--aspect-ratio:690/345;"><img class="thumbnail" data-dominant-color="595350" height="345" src="https://europe1.discourse-cdn.com/flex005/uploads/nouns/optimized/2X/d/d4d93279bb1deab6c74a422f4333cd090b71913c_2_690x345.png" srcset="https://europe1.discourse-cdn.com/flex005/uploads/nouns/optimized/2X/d/d4d93279bb1deab6c74a422f4333cd090b71913c_2_690x345.png, https://europe1.discourse-cdn.com/flex005/uploads/nouns/optimized/2X/d/d4d93279bb1deab6c74a422f4333cd090b71913c_2_1035x517.png 1.5x, https://europe1.discourse-cdn.com/flex005/uploads/nouns/original/2X/d/d4d93279bb1deab6c74a422f4333cd090b71913c.png 2x" width="690"/></div>
<h3><a href="https://prop.house/nouns/open-round:-12/2239" rel="noopener nofollow ugc" target="_blank">Prop House</a></h3>
<p>Get funded to build with your favorite communities.</p>
</article>
<div class="onebox-metadata">
</div>
<div style="clear: both"></div>
</aside>

          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4360_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">waterdrops</div>
          <div class="post_content">
<p><span class="mention">@AndrewLaddusaw</span> this can be used in a future ‘multi-chain’ Nouns world aswell.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2936_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">AndrewLaddusaw</div>
          <div class="post_content">
<p>Definitely sounds like it’s worth exploring. I’m not sure the main DAO would ever implement it, but a place like FOODNOUNS or other subDAOs could prove to be an awesome place to test it out once it’s built!</p>
          </div>
        </div>
      </div>


    </div>
  </body>
</html>